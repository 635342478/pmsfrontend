(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e357e1a2"],{2017:function(e,t,o){"use strict";o("cafe")},"28fd":function(e,t,o){e.exports=o.p+"static/img/login-logo.26e62dcd.png"},"656c":function(e,t,o){},"9ed6":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-container"},[e.isShow?o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[o("div",{staticClass:"title-container"},[o("h3",{staticClass:"title"},[e._v(e._s(e.softName))])]),o("div",{staticClass:"logo-container"},[o("img",{attrs:{src:e.companyLogo,width:"220",height:"40"}})]),o("el-form-item",{attrs:{prop:"username"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"user"}})],1),o("el-input",{ref:"username",attrs:{placeholder:"登录账号",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),o("el-form-item",{attrs:{prop:"password"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"auth"}})],1),o("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),o("el-form-item",{attrs:{prop:"vcode"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password"}})],1),o("el-input",{ref:"vcode",staticStyle:{width:"150px"},attrs:{placeholder:"验证码",name:"vcode",type:"text",tabindex:"3",maxlength:"4","auto-complete":"on"},model:{value:e.loginForm.vcode,callback:function(t){e.$set(e.loginForm,"vcode",t)},expression:"loginForm.vcode"}}),o("div",{staticStyle:{"margin-top":"8px",display:"inline",float:"right","margin-right":"10px"}},[o("img",{staticStyle:{cursor:"pointer","vertical-align":"middle"},attrs:{src:e.verifyCodeUrl,alt:"看不清？点击更换"},on:{click:e.getLoginVerifyCode}})])],1),o("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")]),o("div",{staticStyle:{"text-align":"right"}},[e._v(" 没有账号？"),o("router-link",{attrs:{to:{name:"register"}}},[e._v("点此注册")])],1),o("div",{staticClass:"tips"})],1):e._e(),o("div",{staticClass:"footer",attrs:{id:"footer",role:"contentinfo"}},[o("div",{staticClass:"footerNodelf text-secondary"},[o("span",[e._v("本软件使用权属于："+e._s(e.companyName))])]),o("div",{staticClass:"footerNode text-secondary"},[o("span",{domProps:{innerHTML:e._s(e.copyRight)}},[e._v(e._s(e.copyRight))])])])],1)},n=[],r=o("1da1"),s=(o("b64b"),o("96cf"),o("5f87")),i=o("ae0d"),c=o("5c96"),l=o("83d6"),d=o.n(l),p={name:"Login",data:function(){var e=function(e,t,o){t.length<1?o(new Error("请输入登录账号！")):o()},t=function(e,t,o){t.length<6?o(new Error("请输入您的账号密码,且不小于6位！")):o()};return{loginForm:{username:"",password:"",vcode:"",verifyCodeKey:"",appId:d.a.appId,systemCode:d.a.activeSystemCode},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}],vcode:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:4,message:"长度4字符",trigger:"blur"}]},loading:!1,passwordType:"password",verifyCodeUrl:"",redirect:void 0,softName:"管理系统",companyLogo:o("28fd"),companyName:"",copyRight:"",pageLoading:"",isShow:!1,otherQuery:{}}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},created:function(){var e={lock:!0,text:"正在初始化...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"};this.pageLoading=c["Loading"].service(e),this.loadToken(),this.getLoginVerifyCode()},mounted:function(){},methods:{loadToken:function(){var e=this;Object(i["g"])().then((function(t){Object(s["c"])(t.ResData.AccessToken),Object(i["f"])().then((function(t){e.softName=t.ResData.SoftName,e.companyLogo=t.ResData.SysLogo,e.companyName=t.ResData.CompanyName,e.copyRight=t.ResData.CopyRight})),e.pageLoading.close(),e.isShow=!0}))},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.loading=!0,e.$store.dispatch("user/userlogin",e.loginForm).then((function(t){e.$router.push({path:e.redirect||"/",query:e.otherQuery}),e.loading=!1})).catch((function(t){e.loading=!1}))}))},getLoginVerifyCode:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loginForm.vcode="",t.next=3,Object(i["i"])();case 3:o=t.sent,o.Success&&(e.verifyCodeUrl="data:image/png;base64,"+o.ResData.Img,e.loginForm.verifyCodeKey=o.ResData.Key);case 5:case"end":return t.stop()}}),t)})))()},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,o){return"redirect"!==o&&(t[o]=e[o]),t}),{})}}},u=p,g=(o("2017"),o("e6aa"),o("2877")),m=Object(g["a"])(u,a,n,!1,null,"1a7b999d",null);t["default"]=m.exports},cafe:function(e,t,o){},e6aa:function(e,t,o){"use strict";o("656c")}}]);